
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>특성화 교과목 확인 시스템</title>
   <style>
    body { font-family: sans-serif; padding: 20px; max-width: 1000px; margin: auto; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
    th { background-color: #f0f0f0; }
    .result { margin-top: 30px; white-space: pre-wrap; background: #f4f4f4; padding: 15px; border-radius: 6px; }
    button { margin-top: 20px; padding: 10px 20px; font-size: 16px; }
  </style>
</head>
<body>
  <div style="margin-top: 40px;">
  <h3>📝 학생 정보 입력</h3>
  <input type="text" id="studentName" placeholder="성명" style="margin-right:10px; padding: 8px;">
  <input type="text" id="studentId" placeholder="학번" style="margin-right:10px; padding: 8px;">
  <input type="email" id="studentEmail" placeholder="이메일 주소" style="padding: 8px;">
  <div style="margin-top: 10px;">
    <button onclick="saveToFirebase()">💾 과목 저장하기</button>
    <button onclick="loadFromFirebase()">🔄 과목 불러오기</button>
  </div>
</div>
  <h2>📘 특성화 교과목 확인 시스템</h2>

  <h3>1️⃣ 과목 입력 (최대 20과목)</h3>
  <table id="subjectTable">
    <thead>
      <tr>
        <th>번호</th>
        <th>과목명</th>
        <th>학점</th>
        <th>성적</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <h3 style="margin-top:40px">2️⃣ 반도체특화융합전공 과목 확인용 입력 <br> &nbsp; &nbsp; &nbsp;(한밭대 계절학기-메모리반도체, 첨단반도체패키지개론 / 아주대 계절학기-나노및마이크로소자공정, 반도체실험)</h3>
  <table>
    <thead>
      <tr><th>과목명</th></tr>
    </thead>
    <tbody>
      <tr><td><input type="text" class="fusionInput" placeholder="과목명을 입력하세요"></td></tr>
      <tr><td><input type="text" class="fusionInput" placeholder="과목명을 입력하세요"></td></tr>
    </tbody>
  </table>

  <button onclick="checkSubjects()">확인하기</button>
  <div class="result" id="output"></div>

  <script>
    
    const 성적옵션 = ["A+", "A0", "B+", "B0", "C+", "C0", "D+", "D0", "P", "NP", "F"];

   const 공정과목 = [
  "IoT센서공학",
  "OLED이론및실습",
  "기기분석및실험",
  "기초전자이론및실험",
  "나노및마이크로소자공정",
  "나노반도체재료공학",
  "논리회로",
  "논리회로설계",
  "능동형디스플레이공학",
  "나노마이크로공정및실습",
  "디스플레이공학",
  "디지털공학",
  "디지털논리회로",
  "디지털논리회로및실습",
  "마이크로프로세서",
  "마이크로프로세서및실습",
  "메모리반도체",
  "메모리설계",
  "물리화학",
  "미래반도체입문",
  "박막공학및실습",
  "박막및나노표면공학",
  "반도체공정",
  "반도체공정기술",
  "반도체공정이론및실습",
  "반도체공정장비실습",
  "반도체공학",
  "반도체공학2",
  "반도체공학개론",
  "반도체단위공정론",
  "반도체물리",
  "반도체물성",
  "반도체물성공학",
  "반도체분석실험1",
  "반도체센서공학",
  "반도체소자",
  "반도체소자공학",
  "반도체소자실험",
  "반도체소재설계",
  "반도체실험",
  "반도체심화연구",
  "반도체심화연구2",
  "반도체연구",
  "반도체융합특강",
  "반도체장비의이해",
  "반도체재료",
  "반도체패키지공정실습및분석",
  "사물인터넷",
  "센서공학",
  "센서공학개론",
  "신소재분석",
  "임베디드시스템",
  "재료전자물성론",
  "전기자기학1",
  "전자기장시뮬레이션",
  "전자기학",
  "전자기학1",
  "전자디바이스재료",
  "전자물성공학",
  "전자재료공정",
  "전자회로",
  "전자회로1",
  "전자회로및시뮬레이션1",
  "전자회로및실험",
  "정보디스플레이공학",
  "집적회로공정론",
  "첨단반도체패키지개론",
  "첨단센서융합",
  "캡스톤디자인",
  "캡스톤디자인1",
  "캡스톤디자인2",
  "캡스톤디자인3",
  "회로이론",
  "회로이론1",
  "회로이론및시뮬레이션1"
];

    const 특화공정 = [
  "OLED이론및실습",
  "기기분석및실험",
  "나노반도체재료공학",
  "논리회로",
  "니노마이크로공정및실습",
  "디스플레이공학",
  "마이크로프로세서",
  "메모리반도체",
  "물리화학",
  "미래반도체입문",
  "박막및나노표면공학",
  "반도체공정이론및실습",
  "반도체공학개론",
  "반도체단위공정론",
  "반도체물리",
  "반도체소자공학",
  "반도체소자실험",
  "반도체소재설계",
  "반도체융합특강",
  "반도체재료",
  "반도체패키지공정실습및분석",
  "센서공학",
  "전자기학",
  "전자회로",
  "첨단반도체패키지개론",
  "캡스톤디자인1",
  "캡스톤디자인2",
  "캡스톤디자인3",
  "회로이론"
];
    const 설계과목 = [
  "ASIC설계",
  "FPGA설계",
  "RFIC설계",
  "RF회로",
  "Verilog프로그래밍",
  "VLSI시스템설계",
  "VLSI설계",
  "기초전자이론및실험",
  "논리회로",
  "논리회로설계",
  "디지털공학",
  "디지털논리회로",
  "디지털논리회로및실습",
  "디지털시스템",
  "디지털시스템설계",
  "디지털집적회로",
  "디지털집적회로설계",
  "디지털회로설계",
  "메모리반도체",
  "무선응용공학",
  "미래반도체입문",
  "마이크로프로세서",
  "마이크로프로세서및실습",
  "마이크로파공학",
  "반도체공학",
  "반도체공학개론",
  "반도체물리",
  "반도체물성",
  "반도체물성공학",
  "반도체소자공학",
  "반도체심화연구",
  "반도체심화연구2",
  "반도체연구",
  "반도체융합특강",
  "반도체재료",
  "보안용칩설계",
  "사물인터넷",
  "센서인터페이스설계",
  "시스템반도체설계",
  "아날로그및혼성시스템설계",
  "아날로그집적회로",
  "아날로그회로설계",
  "임베디드시스템",
  "임베디드시스템설계",
  "캡스톤디자인",
  "캡스톤디자인1",
  "캡스톤디자인2",
  "캡스톤디자인3",
  "컴퓨터구조",
  "전기자기학1",
  "전자기장시뮬레이션",
  "전자기학",
  "전자기학1",
  "전자디바이스재료",
  "전자물성공학",
  "전자재료공정",
  "전자회로",
  "전자회로1",
  "전자회로2",
  "전자회로및시뮬레이션1",
  "전자회로및시뮬레이션2",
  "전자회로및실습",
  "전력변환응용",
  "전력반도체설계",
  "전력전자공학",
  "전력전자응용",
  "전력전자및응용실험",
  "재료전자물성론",
  "지능형반도체",
  "지능형반도체설계",
  "첨단센서융합",
  "초고주파공학",
  "컴퓨터구조",
  "회로이론",
  "회로이론1",
  "회로이론및시뮬레이션1"
];
    const 특화설계 = [
  "ASIC설계",
  "FPGA설계",
  "RFIC설계",
  "논리회로",
  "디지털시스템설계",
  "디지털집적회로",
  "디지털집적회로설계",
  "디지털회로설계",
  "마이크로프로세서",
  "메모리반도체",
  "미래반도체입문",
  "반도체공학",
  "반도체공학개론",
  "반도체물리",
  "반도체융합특강",
  "보안용칩설계",
  "센서인터페이스설계",
  "시스템반도체설계",
  "아날로그집적회로",
  "임베디드시스템설계",
  "전력반도체설계",
  "전력변환응용",
  "전력전자공학",
  "전력전자및응용실험",
  "전자기학",
  "전자회로1",
  "전자회로2",
  "지능형반도체",
  "초고주파공학",
  "캡스톤디자인1",
  "캡스톤디자인2",
  "캡스톤디자인3",
  "컴퓨터구조",
  "회로이론"
];

    function createRow(index) {
      const row = document.createElement("tr");
      const 성적셀 = document.createElement("select");
      성적옵션.forEach(g => {
        const opt = document.createElement("option");
        opt.value = g;
        opt.textContent = g;
        성적셀.appendChild(opt);
      });
      row.innerHTML = `
        <td>${index}</td>
        <td><input type="text" placeholder="과목명"></td>
        <td><input type="number" min="0" step="0.5" placeholder="학점"></td>
        <td></td>
      `;
      row.querySelector("td:nth-child(4)").appendChild(성적셀);
      return row;
    }

    function fillTable() {
      const tbody = document.querySelector("#subjectTable tbody");
      for (let i = 1; i <= 20; i++) {
        tbody.appendChild(createRow(i));
      }
    }

    function checkSubjects() {
    const rows = document.querySelectorAll("#subjectTable tbody tr");
    let processCount = 0, designCount = 0;
    let processCredit = 0, designCredit = 0;
    let processSubjects = [], designSubjects = [], unknownSubjects = [];

    rows.forEach(row => {
    const subject = row.cells[1].querySelector("input").value.trim();
    const credit = parseFloat(row.cells[2].querySelector("input").value) || 0;

    if (!subject) return; // 빈칸 무시

    let matched = false;

    if (공정과목.includes(subject)) {
      processCount++; processCredit += credit;
      processSubjects.push(subject);
      matched = true;
    }

    if (설계과목.includes(subject)) {
      designCount++; designCredit += credit;
      designSubjects.push(subject);
      matched = true;
    }

    if (!matched) {
      unknownSubjects.push(subject);
     }
   });

   // 특화 확인용 입력
   const fusionInputs = document.querySelectorAll(".fusionInput");
   let fusionResults = "";
   fusionInputs.forEach(input => {
    const val = input.value.trim();
    if (val === "") return;
    if (특화공정.includes(val) || 특화설계.includes(val)) {
      fusionResults += `✅ ${val} 은(는) 반도체특화융합전공 과목입니다.\n`;
     } else {
      fusionResults += `❌ ${val} 은(는) 반도체특화융합전공 과목이 아닙니다.\n`;
    }
   });

   // 결과 메시지 구성
   const result = `
  🧪 반도체공정소자융합 수강 과목 수: ${processCount}개 / 학점 합계: ${processCredit}
  📐 반도체회로설계융합 수강 과목 수: ${designCount}개 / 학점 합계: ${designCredit}

  ✅ 반도체공정소자융합 과목: ${processSubjects.join(', ') || "없음"}
  ✅ 반도체회로설계융합 과목: ${designSubjects.join(', ') || "없음"}

  ⚠️ 해당되지 않는 과목: ${unknownSubjects.join(', ') || "없음"}
  
 
  🔍 특화과목 확인 결과:
  ${fusionResults}
 `;
 

  document.getElementById("output").textContent = result;
}
      document.addEventListener("DOMContentLoaded", () => {
      fillTable();
      });

   
   </script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
   <script>
   
    // Firebase 구성 정보
    const firebaseConfig = {
      apiKey: "AIzaSyCqAkZdsttkMqkXE3jfncLlspPjnyGq3Ok",
      authDomain: "subjectcheck-d4c29.firebaseapp.com",
      projectId: "subjectcheck-d4c29",
      storageBucket: "subjectcheck-d4c29.appspot.com",
      messagingSenderId: "793005919646",
      appId: "1:793005919646:web:03ea30508089e76860da8f"
    };

    // Firebase 초기화
    firebase.initializeApp(firebaseConfig);
    const db = firebase.firestore();
    function saveToFirebase() {
    const name = document.getElementById("studentName").value.trim();
    const studentId = document.getElementById("studentId").value.trim();
    const email = document.getElementById("studentEmail").value.trim();

    if (!name || !studentId || !email) {
    return alert("성명, 학번, 이메일을 모두 입력하세요!");
   }

    const rows = document.querySelectorAll("#subjectTable tbody tr");
    const data = Array.from(rows).map(row => ({
    subject: row.cells[1].querySelector("input").value.trim(),
    credit: row.cells[2].querySelector("input").value.trim(),
    grade: row.cells[3].querySelector("select").value
   })).filter(item => item.subject !== "");

   db.collection("students").doc(studentId).set({
    name,
    email,
    subjects: data
   }).then(() => alert("✅ 서버에 저장되었습니다!"))
    .catch(err => alert("⚠️ 저장 실패: " + err.message));
   }

   function loadFromFirebase() {
  const studentId = document.getElementById("studentId").value.trim();
  const nameInput = document.getElementById("studentName").value.trim();
  const emailInput = document.getElementById("studentEmail").value.trim();

  if (!studentId || !nameInput || !emailInput) {
    return alert("성명, 학번, 이메일을 모두 입력하세요!");
  }

  db.collection("students").doc(studentId).get().then(doc => {
    if (!doc.exists) return alert("❌ 해당 학번의 데이터가 없습니다.");

    const data = doc.data();

    // 🔐 성명/이메일 검증
    if (data.name !== nameInput || data.email !== emailInput) {
      return alert("❌ 성명 또는 이메일이 일치하지 않습니다.");
    }

    const subjects = data.subjects || [];

    // 과목 복원
    const rows = document.querySelectorAll("#subjectTable tbody tr");
    subjects.forEach((item, i) => {
      if (rows[i]) {
        rows[i].cells[1].querySelector("input").value = item.subject;
        rows[i].cells[2].querySelector("input").value = item.credit;
        rows[i].cells[3].querySelector("select").value = item.grade;
      }
    });

    alert("✅ 서버에서 불러오기 완료!");
  }).catch(err => alert("⚠️ 불러오기 실패: " + err.message));
}
  </script>
</body>
</html>
